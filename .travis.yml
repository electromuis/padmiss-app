language: android
sudo: false
before_deploy:
- git config --local user.name "Electromuis"
- git config --local user.email "anton.grootes11@gmail.com"
- git tag "$(date +'%Y%m%d%H%M%S')"
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: OWoYIr5FHdMQOIBd4TmbeHFpQ2B/BxSBYzWgXcnTupCaPHSUgLfmMqOj8yi4d8WSS+dB1wDxkxuJ7DFVozmrav60fMehFbO4qgAqH/UttIHy3BbVoj1jT/AQuwU8IcNXwwI3oO12vPqLcpsCBeStPij1NToo6g7eSU7YpCTZDSrWKlPVjW0l537n0m12VQ2B+xlnzUD8gFdcPZ8OnOnqPbemWCu0hdWenrlVe7Dnj14h8/SPARvpSF/t+j7egiczg6r5DvJszHNq36+FO7k8Q06bS9b41DoZMxpLWiIPinCBzy0c8VQt6az97X/CpsqSTHVIKNt77ydHp/dvR2VRx87R7wR+vNEu4t6HeQElNNzRju9B7CovvxagttCtd9BDZLQ9WwVsrCjPGCfIAks01WOVVe8F+EI1xxRcxN5peihMuwFVZhGR6MqYNGl0IfGxvOPaDtxKvmMhClhcxg+iwPIz92yer+ukTAVA8PTNEoPvUvNRSa2o0rZ84l7+zsaZJ4flrAn9mL/KRpU/F3TWpIUCTLWn2YS34WiuHuJ2QjE52fh6DjO5alceI+VS8pgEL4Jnbpmr1eeCrhrbP729NqqJu8lEn7YgXpNJNn6npa9qWU2F28v67Ek2Cg3/9XrHSTTDgLWY3pJ4nq/oELPqq9qRTtbGHVoZ/E9KDXLVHZk=
  file: "platforms/android/app/build/outputs/apk/release/*.apk"
  file_glob: "true"
  on:
    repo: electromuis/padmiss-app
android:
  components:
  - build-tools-27.0.1
  - android-27
env:
  global:
  - TERM=dumb
  - NODE_VERSION=8
branches:
  only:
  - master
before_install:
- nvm install $NODE_VERSION
- npm install -g cordova
install:
- npm install
before_script:
- cordova platform rm android
- cordova platform add android
script:
- npm run build
- cordova prepare
- cordova build android --release -- --ant
release:
- exit 0
